# Aragora Environment Configuration
# Copy this file to .env and configure your settings
#
# Profiles:
#   - MINIMAL: Just AI keys + basic config (dev/testing)
#   - SME: Adds persistence, security, integrations
#   - PRODUCTION: Full enterprise features, SSO, observability
#
# Required: At least one AI provider API key

# =============================================================================
# AI Provider API Keys (at least one required)
# =============================================================================
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
# Optional additional providers for multi-model debates
OPENROUTER_API_KEY=
MISTRAL_API_KEY=
GEMINI_API_KEY=
XAI_API_KEY=

# =============================================================================
# Database Configuration
# =============================================================================
# Backend: "postgres" (recommended), "sqlite" (dev only), "supabase"
ARAGORA_DB_BACKEND=postgres

# PostgreSQL connection (for production)
# SECURITY: Use secrets manager (AWS Secrets Manager, K8s Secrets) in production
# POSTGRES_PASSWORD=  # Set via secrets manager, not .env file
# Full DSN (auto-configured in docker-compose)
# DATABASE_URL=postgresql://aragora:password@localhost:5432/aragora

# Supabase (alternative to PostgreSQL)
# SUPABASE_URL=
# SUPABASE_KEY=
# SUPABASE_JWT_SECRET=

# =============================================================================
# Server Configuration
# =============================================================================
# Environment: development, staging, production
ARAGORA_ENV=production
ARAGORA_API_PORT=8080
ARAGORA_WS_PORT=8765
# Log level: DEBUG, INFO, WARNING, ERROR
ARAGORA_LOG_LEVEL=INFO
# Log format: json (production), text (development)
ARAGORA_LOG_FORMAT=json

# SECURITY: Never use '*' in production - explicitly list allowed origins
ARAGORA_ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# Data directory for runtime files
ARAGORA_DATA_DIR=.nomic
# Persist canonical convoys/beads in the runtime data dir
ARAGORA_CANONICAL_STORE_PERSIST=1
# Optional: override convoy/bead store location
# ARAGORA_STORE_DIR=/var/lib/aragora/.aragora_beads

# =============================================================================
# Security
# =============================================================================
# Secret key for JWT tokens and encryption (generate: openssl rand -base64 32)
ARAGORA_SECRET_KEY=
# Optional API token for programmatic authentication
ARAGORA_API_TOKEN=

# Cookie security (set all to true in production behind HTTPS)
ARAGORA_COOKIE_SECURE=true
ARAGORA_COOKIE_HTTPONLY=true
ARAGORA_COOKIE_SAMESITE=Strict

# =============================================================================
# Rate Limiting
# =============================================================================
# Global rate limit: requests per second
ARAGORA_RATE_LIMIT=100
# Burst multiplier (allows temporary bursts above rate limit)
# ARAGORA_BURST_MULTIPLIER=2

# =============================================================================
# Input Validation
# =============================================================================
# Validation mode: blocking (default, rejects invalid requests), warn (allows through but logs), disabled
# ARAGORA_VALIDATION_MODE=blocking
# Legacy boolean equivalent (prefer ARAGORA_VALIDATION_MODE)
# ARAGORA_VALIDATION_BLOCKING=true
# Max request body size in bytes (default: 10MB)
# ARAGORA_VALIDATION_MAX_BODY_SIZE=10485760
# Max JSON nesting depth (default: 10)
# ARAGORA_VALIDATION_MAX_JSON_DEPTH=10
# Max array items per field (default: 1000)
# ARAGORA_VALIDATION_MAX_ARRAY_ITEMS=1000

# =============================================================================
# Content Security Policy (CSP)
# =============================================================================
# CSP mode: enforce (default), report-only, disabled
# ARAGORA_CSP_MODE=enforce
# Enable CSP headers
# ARAGORA_ENABLE_CSP=true
# CSP violation report endpoint
# ARAGORA_CSP_REPORT_URI=/api/csp-report

# =============================================================================
# Redis (Session/Cache)
# =============================================================================
# Redis URL (auto-configured in docker-compose)
# ARAGORA_REDIS_URL=redis://localhost:6379
# Redis socket timeout in seconds
# ARAGORA_REDIS_SOCKET_TIMEOUT=5
# For Redis Cluster deployments
# ARAGORA_REDIS_CLUSTER_NODES=host1:6379,host2:6379,host3:6379

# =============================================================================
# Multi-Instance / Cluster
# =============================================================================
# Enable for horizontal scaling with multiple instances
# ARAGORA_MULTI_INSTANCE=true
# Trusted proxy CIDR ranges (for X-Forwarded-For)
ARAGORA_TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# =============================================================================
# WebSocket Configuration
# =============================================================================
# Max WebSocket connections per IP
# ARAGORA_WS_MAX_PER_IP=10
# WebSocket connection rate limit per second
# ARAGORA_WS_CONN_RATE=5

# =============================================================================
# Audit & Compliance
# =============================================================================
# Enable audit logging
# ARAGORA_AUDIT_ENABLED=true
# Audit log directory
# ARAGORA_AUDIT_LOG_DIR=/var/log/aragora/audit
# Audit trail retention in days (default ~7 years for compliance)
# ARAGORA_AUDIT_TRAIL_RETENTION_DAYS=2555
# Audit storage: local, s3
# ARAGORA_AUDIT_STORE_BACKEND=local
# For S3 storage
# ARAGORA_AUDIT_S3_BUCKET=aragora-audit-logs

# =============================================================================
# Receipt Signing (Decision Audit Trail)
# =============================================================================
# HMAC key for signing decision receipts
ARAGORA_RECEIPT_SIGNING_KEY=
# Auto-sign all debate decision receipts
# ARAGORA_AUTO_SIGN_RECEIPTS=true
# Receipt retention in days
# ARAGORA_RECEIPT_RETENTION_DAYS=2555

# =============================================================================
# Observability
# =============================================================================
# Sentry for error tracking
# SENTRY_DSN=
# Enable Prometheus metrics endpoint
# ARAGORA_METRICS_ENABLED=true
# OpenTelemetry tracing
# ARAGORA_SERVICE_NAME=aragora
# OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317

# =============================================================================
# Slack Integration (Optional)
# =============================================================================
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=
SLACK_SIGNING_SECRET=
SLACK_APP_TOKEN=
SLACK_BOT_TOKEN=

# =============================================================================
# Microsoft Teams Integration (Optional)
# =============================================================================
# TEAMS_APP_ID=
# TEAMS_APP_PASSWORD=

# =============================================================================
# SSO / Enterprise Authentication (Optional)
# =============================================================================
# OIDC Configuration
# ARAGORA_SSO_ENABLED=false
# ARAGORA_SSO_PROVIDER_TYPE=oidc
# ARAGORA_SSO_CLIENT_ID=
# ARAGORA_SSO_CLIENT_SECRET=
# ARAGORA_SSO_ISSUER_URL=https://login.microsoftonline.com/tenant/v2.0
# ARAGORA_SSO_CALLBACK_URL=https://your-domain.com/auth/sso/callback
# ARAGORA_SSO_ALLOWED_DOMAINS=yourcompany.com

# SAML Configuration
# ARAGORA_SSO_PROVIDER_TYPE=saml
# ARAGORA_SSO_IDP_ENTITY_ID=
# ARAGORA_SSO_IDP_SSO_URL=
# ARAGORA_SSO_IDP_CERTIFICATE=

# =============================================================================
# Email / SMTP (Optional)
# =============================================================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASSWORD=
# SMTP_FROM=noreply@yourdomain.com

# =============================================================================
# Voice / TTS (Optional)
# =============================================================================
# STT provider: whisper, whisper_cpp, deepgram
# ARAGORA_STT_PROVIDER=whisper
# Voice chunk size for streaming
# ARAGORA_VOICE_CHUNK_SIZE=1024
# Path to whisper.cpp binary
# WHISPER_CPP_PATH=/usr/local/bin/whisper

# =============================================================================
# Search / Knowledge (Optional)
# =============================================================================
# Brave Search API
# BRAVE_API_KEY=
# Serper (Google Search API)
# SERPER_API_KEY=
# Weaviate vector database
# WEAVIATE_URL=http://localhost:8080
# WEAVIATE_API_KEY=
