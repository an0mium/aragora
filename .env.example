# Aragora Environment Configuration
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Full documentation: docs/ENVIRONMENT.md

# =============================================================================
# AI PROVIDER KEYS (At least one required)
# =============================================================================

# Anthropic Claude - https://console.anthropic.com/
ANTHROPIC_API_KEY=

# OpenAI - https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Google Gemini - https://aistudio.google.com/apikey
GEMINI_API_KEY=

# xAI Grok - https://console.x.ai/
XAI_API_KEY=

# Mistral AI - https://console.mistral.ai/
MISTRAL_API_KEY=

# OpenRouter (multi-model: DeepSeek, Llama, Qwen, Yi) - https://openrouter.ai/
OPENROUTER_API_KEY=

# DeepSeek (direct API) - https://platform.deepseek.com/
DEEPSEEK_API_KEY=

# =============================================================================
# LOCAL MODELS (Optional)
# =============================================================================

# Ollama - https://ollama.ai
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama2

# LM Studio - https://lmstudio.ai
LM_STUDIO_HOST=http://localhost:1234

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port (HTTP + WebSocket on /ws)
ARAGORA_PORT=8080

# Bind address
ARAGORA_HOST=0.0.0.0

# Environment mode: development or production
# Production enables stricter security (required JWT secret, etc.)
ARAGORA_ENVIRONMENT=development

# Data directory for databases and state
ARAGORA_DATA_DIR=.nomic

# =============================================================================
# AGENT DEFAULTS & STREAMING
# =============================================================================

# Default agents when none specified (comma-separated)
ARAGORA_DEFAULT_AGENTS=grok,anthropic-api,openai-api,deepseek,mistral-api,gemini,qwen-max,kimi

# Streaming-capable agent allowlist (comma-separated)
ARAGORA_STREAMING_AGENTS=grok,anthropic-api,openai-api,mistral-api

# Streaming buffer size (bytes) and chunk timeout (seconds)
ARAGORA_STREAM_BUFFER_SIZE=10485760
ARAGORA_STREAM_CHUNK_TIMEOUT=30

# =============================================================================
# AUTHENTICATION (Optional in development, required in production)
# =============================================================================

# Simple token auth (development)
ARAGORA_API_TOKEN=

# JWT Configuration (production)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
ARAGORA_JWT_SECRET=
ARAGORA_JWT_EXPIRY_HOURS=24
ARAGORA_REFRESH_TOKEN_EXPIRY_DAYS=30

# =============================================================================
# PERSISTENCE (Optional but recommended)
# =============================================================================

# Supabase - https://supabase.com
SUPABASE_URL=
SUPABASE_KEY=

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Comma-separated allowed origins
# ARAGORA_ALLOWED_ORIGINS=https://myapp.com,https://staging.myapp.com

# =============================================================================
# RATE LIMITING
# =============================================================================

ARAGORA_RATE_LIMIT=60
ARAGORA_IP_RATE_LIMIT=120
ARAGORA_BURST_MULTIPLIER=2.0

# Redis-backed rate limiting (optional)
# ARAGORA_REDIS_URL=redis://localhost:6379/0
# ARAGORA_REDIS_KEY_PREFIX=aragora:ratelimit:
# ARAGORA_REDIS_TTL=120
# ARAGORA_REDIS_MAX_CONNECTIONS=50
# ARAGORA_REDIS_SOCKET_TIMEOUT=5.0

# =============================================================================
# BILLING (Stripe Integration)
# =============================================================================

# Stripe - https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_STARTER=
STRIPE_PRICE_PROFESSIONAL=
STRIPE_PRICE_ENTERPRISE=

# =============================================================================
# WEBHOOKS
# =============================================================================

WEBHOOK_URL=
WEBHOOK_SECRET=
# Allow localhost webhook targets (dev only)
# ARAGORA_WEBHOOK_ALLOW_LOCALHOST=false

# =============================================================================
# SOCIAL MEDIA / PULSE MODULE
# =============================================================================

# Twitter/X trending topics - https://developer.twitter.com
TWITTER_BEARER_TOKEN=

# =============================================================================
# TEXT-TO-SPEECH / BROADCAST
# =============================================================================

# TTS backend priority (comma-separated)
# ARAGORA_TTS_ORDER=elevenlabs,xtts,edge-tts,pyttsx3

# ElevenLabs - https://elevenlabs.io
ARAGORA_ELEVENLABS_API_KEY=

# =============================================================================
# LOGGING & OBSERVABILITY
# =============================================================================

ARAGORA_DEBUG=false
ARAGORA_LOG_LEVEL=INFO
# Log format: json (production) or text (development)
ARAGORA_LOG_FORMAT=json
# Include timestamps in logs
ARAGORA_LOG_TIMESTAMP=true
# Log file path (optional, logs to stdout if not set)
# ARAGORA_LOG_FILE=/var/log/aragora/server.log
# ARAGORA_LOG_MAX_BYTES=10485760
# ARAGORA_LOG_BACKUP_COUNT=5

# Telemetry level: SILENT, DIAGNOSTIC, CONTROLLED, SPECTACLE
ARAGORA_TELEMETRY_LEVEL=CONTROLLED

# =============================================================================
# METRICS (Prometheus)
# =============================================================================

# Enable Prometheus metrics endpoint
METRICS_ENABLED=true
# Metrics server port (separate from main server)
METRICS_PORT=9090

# =============================================================================
# ERROR TRACKING (Sentry)
# =============================================================================

# Sentry DSN - https://sentry.io
# SENTRY_DSN=
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1
# SENTRY_SERVER_NAME=aragora-prod-1

# =============================================================================
# SLO CONFIGURATION
# =============================================================================

# Override default SLO targets
# SLO_AVAILABILITY_TARGET=0.999
# SLO_LATENCY_P99_TARGET_MS=500
# SLO_DEBATE_SUCCESS_TARGET=0.95

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket rate limiting
ARAGORA_WS_CONN_RATE=30
ARAGORA_WS_MAX_PER_IP=10

# Require authentication for WebSocket connections
# ARAGORA_AUTH_REQUIRED=true

# Trusted proxy addresses (comma-separated)
ARAGORA_TRUSTED_PROXIES=127.0.0.1,::1,localhost

# =============================================================================
# SESSION & OAUTH
# =============================================================================

# Redis URL for distributed session storage
# REDIS_URL=redis://localhost:6379/0

# OAuth state TTL (seconds)
# OAUTH_STATE_TTL_SECONDS=600
# OAUTH_MAX_STATES=10000

# =============================================================================
# SECURITY
# =============================================================================

# Rate limit fail-open mode (allow requests if Redis is down)
# ARAGORA_RATE_LIMIT_FAIL_OPEN=false
# ARAGORA_REDIS_FAILURE_THRESHOLD=3

# Maximum concurrent CLI subprocesses
ARAGORA_MAX_CLI_SUBPROCESSES=10

# Maximum concurrent debates
# ARAGORA_MAX_CONCURRENT_DEBATES=10

# =============================================================================
# DATABASE
# =============================================================================

# Database URL (PostgreSQL) for migrations
# DATABASE_URL=postgresql://user:pass@localhost/aragora
# ARAGORA_DATABASE_URL=postgresql://user:pass@localhost/aragora

# SQLite connection pool size
# ARAGORA_DB_POOL_SIZE=20

# =============================================================================
# TINKER (Fine-tuning Service)
# =============================================================================

# TINKER_API_KEY=
# TINKER_BASE_MODEL=meta-llama/Llama-3.3-70B-Instruct

# =============================================================================
# YOUTUBE UPLOAD (Optional)
# =============================================================================

# YOUTUBE_CLIENT_ID=
# YOUTUBE_CLIENT_SECRET=
# YOUTUBE_REFRESH_TOKEN=

# =============================================================================
# TWITTER/X POSTING (Optional)
# =============================================================================

# TWITTER_API_KEY=
# TWITTER_API_SECRET=
# TWITTER_ACCESS_TOKEN=
# TWITTER_ACCESS_SECRET=

# =============================================================================
# SSL/TLS (Production)
# =============================================================================

ARAGORA_SSL_ENABLED=false
# ARAGORA_SSL_CERT=/path/to/cert.pem
# ARAGORA_SSL_KEY=/path/to/key.pem
