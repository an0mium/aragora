# Aragora CLI Setup Guide

The `aragora setup` command provides an interactive wizard to configure your Aragora installation. This guide covers all setup options and best practices.

## Quick Start

```bash
# Full interactive setup
aragora setup

# Quick setup with minimal prompts
aragora setup --minimal

# Non-interactive setup using environment defaults
aragora setup --yes
```

## Command Options

| Option | Description |
|--------|-------------|
| `--minimal` | Only configure essential settings (API keys and ports) |
| `--yes` | Non-interactive mode, use all defaults |
| `--skip-test` | Skip API key validation (useful offline) |
| `--output PATH` | Specify output directory for .env file |

## What Gets Configured

### 1. API Keys (Required)

The wizard prompts for AI provider API keys. At least one is required:

- **Anthropic API Key** (recommended) - Powers Claude models
- **OpenAI API Key** - Powers GPT models
- **OpenRouter API Key** (optional) - Fallback when primary APIs are rate-limited

The wizard automatically detects existing keys from your environment and offers to reuse them.

### 2. Server Ports

Configure the HTTP API and WebSocket ports:

- **HTTP Port** (default: 8080) - REST API endpoints
- **WebSocket Port** (default: 8765) - Real-time streaming

### 3. Database

Choose your database backend:

- **SQLite** (default) - No setup required, great for development
- **PostgreSQL** - Production-ready, recommended for deployment

### 4. Integrations (Full Setup Only)

Optional connectors for external services:

- **Slack** - Connect debates to Slack workspaces
- **GitHub** - Integrate with repositories
- **Telegram** - Bot integration

### 5. Security (Full Setup Only)

- **Encryption Key** - Auto-generated AES-256 key for sensitive data

## Example Session

```
============================================================
  Aragora Setup Wizard
============================================================

This wizard will help you configure Aragora.
Press Ctrl+C at any time to cancel.

[1/5] API Keys Configuration
----------------------------------------
Aragora requires at least one AI provider API key.

  Anthropic API Key (recommended): ********
  OpenAI API Key: ********

  Configure OpenRouter for fallback? (recommended) [Y/n]: y
  OpenRouter API Key: ********

[2/5] Testing API Keys
----------------------------------------
  Testing Anthropic key... OK (Valid)
  Testing OpenAI key... OK (Valid)
  Testing OpenRouter key... OK (Valid)

[3/5] Server Configuration
----------------------------------------
  HTTP Port [8080]:
  WebSocket Port [8765]:

  Database options:
    1. SQLite (simple, no setup required)
    2. PostgreSQL (production-ready, requires setup)
  Select database [1/2]: 1

[4/5] Integrations (Optional)
----------------------------------------
  Configure integrations to connect Aragora with external services.

  Configure Slack integration? [y/N]: n
  Configure GitHub integration? [y/N]: n
  Configure Telegram integration? [y/N]: n

[5/5] Security Configuration
----------------------------------------
  Generate encryption key for secrets? [Y/n]: y
    Generated key: a1b2c3d4e5f6g7h8...

============================================================
  Generating Configuration
============================================================
  Created: /path/to/project/.env

============================================================
  Setup Complete!
============================================================

Configuration summary:
  - Anthropic API: Configured
  - OpenAI API: Configured
  - OpenRouter: Configured
  - Database: SQLITE
  - HTTP Port: 8080

Next steps:
  1. Review .env file and adjust settings if needed
  2. Start the server: aragora serve
  3. Run a debate: aragora ask 'Your question here'

For more help, run: aragora --help
```

## Generated .env File

The wizard creates a `.env` file with your configuration:

```bash
# Aragora Configuration
# Generated by aragora setup

# =============================================================================
# API Keys (at least one required)
# =============================================================================

ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# Optional provider keys
OPENROUTER_API_KEY=sk-or-...  # Fallback on rate limits

# =============================================================================
# Server Configuration
# =============================================================================

ARAGORA_HTTP_PORT=8080
ARAGORA_WS_PORT=8765

# Database (SQLite - default)
# DATABASE_URL=sqlite:///aragora.db

# Security
ARAGORA_ENCRYPTION_KEY=your-generated-key
```

## Post-Setup Verification

After running setup, verify your configuration:

```bash
# Check system health
aragora doctor

# Verify server starts
aragora serve

# Test with a simple debate
aragora ask "What is 2+2?"
```

## Troubleshooting

### API Key Validation Failed

If key validation fails during setup:

1. Check your internet connection
2. Verify the key is correct (no extra spaces)
3. Use `--skip-test` to skip validation and test manually later

```bash
aragora setup --skip-test
```

### Existing .env File

If a `.env` file already exists, the wizard will:
1. Ask if you want to overwrite
2. Create a backup as `.env.backup` if you confirm

### Non-Interactive Setup

For CI/CD pipelines or automated deployment:

```bash
# Set keys in environment first
export ANTHROPIC_API_KEY=your-key
export OPENAI_API_KEY=your-key

# Run non-interactive setup
aragora setup --yes
```

## Next Steps

After setup, explore these resources:

- [Getting Started Guide](GETTING_STARTED.md) - Full usage guide
- [Self-Hosted Quickstart](SELF_HOSTED_QUICKSTART.md) - Docker deployment
- [Environment Reference](ENVIRONMENT.md) - All configuration options
