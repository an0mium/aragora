---
# Aragora ClusterSecretStore Configuration
#
# Choose ONE of the following configurations based on your secret provider.
# Uncomment the appropriate section and configure credentials.
#
# For production:
#   1. Configure the appropriate secret store below
#   2. Store credentials using Kubernetes service accounts or IAM roles
#   3. Update external-secret.yaml secretStoreRef to match
#   4. Uncomment in kustomization.yaml

# =============================================================================
# Option 1: HashiCorp Vault
# =============================================================================
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: vault-backend
spec:
  provider:
    vault:
      server: "https://vault.example.com"
      path: "secret"
      version: "v2"
      auth:
        # Kubernetes auth (recommended for K8s deployments)
        kubernetes:
          mountPath: "kubernetes"
          role: "aragora"
          serviceAccountRef:
            name: aragora
            namespace: aragora
        # Alternative: Token auth (for testing)
        # tokenSecretRef:
        #   name: vault-token
        #   key: token
        #   namespace: aragora

---
# =============================================================================
# Option 2: AWS Secrets Manager
# =============================================================================
# Uncomment this section if using AWS
#
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: aws-secrets-manager
# spec:
#   provider:
#     aws:
#       service: SecretsManager
#       region: us-east-1  # Change to your region
#       # Use IRSA (IAM Roles for Service Accounts) - recommended
#       auth:
#         jwt:
#           serviceAccountRef:
#             name: aragora
#             namespace: aragora
#       # Alternative: Use IAM credentials (not recommended)
#       # auth:
#       #   secretRef:
#       #     accessKeyIDSecretRef:
#       #       name: aws-credentials
#       #       key: access-key-id
#       #     secretAccessKeySecretRef:
#       #       name: aws-credentials
#       #       key: secret-access-key

---
# =============================================================================
# Option 3: Google Cloud Secret Manager
# =============================================================================
# Uncomment this section if using GCP
#
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: gcp-secret-manager
# spec:
#   provider:
#     gcpsm:
#       projectID: your-gcp-project-id
#       auth:
#         # Use Workload Identity (recommended)
#         workloadIdentity:
#           clusterLocation: us-central1
#           clusterName: your-cluster
#           clusterProjectID: your-gcp-project-id
#           serviceAccountRef:
#             name: aragora
#             namespace: aragora
#       # Alternative: Use service account JSON key (not recommended)
#       # auth:
#       #   secretRef:
#       #     secretAccessKeySecretRef:
#       #       name: gcp-credentials
#       #       key: credentials.json

---
# =============================================================================
# Option 4: Azure Key Vault
# =============================================================================
# Uncomment this section if using Azure
#
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: azure-key-vault
# spec:
#   provider:
#     azurekv:
#       vaultUrl: "https://your-keyvault.vault.azure.net"
#       authType: WorkloadIdentity
#       serviceAccountRef:
#         name: aragora
#         namespace: aragora
#       # Alternative: Use service principal
#       # authSecretRef:
#       #   clientId:
#       #     name: azure-credentials
#       #     key: client-id
#       #   clientSecret:
#       #     name: azure-credentials
#       #     key: client-secret
#       # tenantId: "your-tenant-id"
