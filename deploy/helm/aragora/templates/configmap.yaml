apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "aragora.fullname" . }}-config
  labels:
    {{- include "aragora.labels" . | nindent 4 }}
data:
  # Server configuration
  ARAGORA_BIND_HOST: {{ .Values.config.bindHost | quote }}
  ARAGORA_API_PORT: {{ .Values.config.apiPort | quote }}
  ARAGORA_WS_PORT: {{ .Values.config.wsPort | quote }}
  ARAGORA_ENV: {{ .Values.config.environment | quote }}
  ARAGORA_LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  ARAGORA_LOG_FORMAT: {{ .Values.config.logFormat | quote }}
  # CORS
  ARAGORA_ALLOWED_ORIGINS: {{ .Values.config.allowedOrigins | quote }}
  # Data persistence
  ARAGORA_CANONICAL_STORE_PERSIST: {{ .Values.config.canonicalStorePersist | quote }}
  ARAGORA_STORE_DIR: {{ .Values.config.storeDir | quote }}
  ARAGORA_DATA_DIR: "/app/data"
  # Rate limiting
  ARAGORA_RATE_LIMIT_ENABLED: {{ .Values.config.rateLimitEnabled | quote }}
  ARAGORA_RATE_LIMIT_WINDOW: {{ .Values.config.rateLimitWindow | quote }}
  ARAGORA_RATE_LIMIT_MAX_REQUESTS: {{ .Values.config.rateLimitMaxRequests | quote }}
  # Database backend selection
  ARAGORA_DB_BACKEND: {{ .Values.config.dbBackend | quote }}
