repos:
  - repo: https://github.com/psf/black
    rev: 24.10.0
    hooks:
      - id: black
        language_version: python3.11

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.8.0
    hooks:
      - id: ruff
        args: [--fix]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.13.0
    hooks:
      - id: mypy
        additional_dependencies: [types-all]

  - repo: https://github.com/PyCQA/bandit
    rev: 1.8.0
    hooks:
      - id: bandit
        args: ["-ll", "-x", "tests/"]

  # Local hooks
  - repo: local
    hooks:
      - id: no-root-artifacts
        name: Check for root-level runtime artifacts
        entry: bash -c 'files=$(find . -maxdepth 1 -type f \( -name "*.db" -o -name "*.db-*" -o -name "*.sqlite*" -o -name ":memory:" \) 2>/dev/null); if [ -n "$files" ]; then echo "ERROR: Root-level runtime artifacts found:"; echo "$files"; echo "Run: scripts/cleanup_runtime_artifacts.sh --apply"; exit 1; fi'
        language: system
        pass_filenames: false
        always_run: true
